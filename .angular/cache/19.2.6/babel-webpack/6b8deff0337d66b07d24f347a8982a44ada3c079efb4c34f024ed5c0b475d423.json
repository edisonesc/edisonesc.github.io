{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { projects } from './../../providers/projects.provider';\nimport { WORK_TYPE } from './../../enums/work-type.enum';\nimport { Component, HostListener } from '@angular/core';\nimport { experiences } from 'src/app/providers/experience.provider';\nimport { user } from 'src/app/providers/user.provider';\nimport { OTHER_TECHNOLOGIES } from 'src/app/providers/technologies.provider';\nlet HomeComponent = class HomeComponent {\n  constructor(pageService, route) {\n    this.pageService = pageService;\n    this.route = route;\n    this.isLoading = false;\n    this.user = user;\n    this.projects = projects;\n    this.work_experiences = experiences.filter(experience => [WORK_TYPE.DIRECT, WORK_TYPE.INTERN, WORK_TYPE.OUTSOURCING].includes(experience.type));\n    this.education_experiences = experiences.filter(experience => experience.type == WORK_TYPE.EDUCATION);\n    this.experiences = [this.work_experiences, this.education_experiences];\n    this.isProjectSectionOnFull = false;\n    this.analytics = {\n      mostUsedTechnologies: {\n        data: [],\n        limit: 40\n      }\n    };\n    this.groupTechnologies = {\n      Frontend: [],\n      Backend: [],\n      Others: []\n    };\n    this.config = {};\n  }\n  ngOnInit() {\n    this.initAnalytics();\n    this.initScrollAnimation();\n    // localStorage approach\n    this.initSaveContent();\n  }\n  initSaveContent() {\n    const payload = {\n      user,\n      experiences,\n      technologies: this.analytics.mostUsedTechnologies.data.map(e => e.technology),\n      projects\n    };\n    // const content = getCVTemplate(user, experiences , this.analytics.mostUsedTechnologies.data.map(e => e.technology),projects);\n    localStorage.setItem('cvData', JSON.stringify(payload));\n  }\n  initScrollAnimation() {\n    const observer = new IntersectionObserver(entries => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          entry.target.classList.add('show');\n        }\n        // else {\n        //   entry.target.classList.remove('show')\n        // }\n      });\n    });\n    const hiddenElements = document.querySelectorAll('.hidden');\n    hiddenElements.forEach(el => observer.observe(el));\n  }\n  ngAfterViewInit() {}\n  getDisplayedProject() {\n    let partialProjects = [...projects].slice(0, 3);\n    return this.projects; //this.isProjectSectionOnFull ? this.projects : partialProjects;\n  }\n  toggleProjectSection() {\n    this.isProjectSectionOnFull = !this.isProjectSectionOnFull;\n    if (!this.isProjectSectionOnFull) this.scrollInto('projects-section\"');\n  }\n  initAnalytics() {\n    let projectTechnologies = [];\n    this.projects.forEach(project => project.technologies.forEach(technology => {\n      let projectTechnologyFilterList = projectTechnologies.filter(pt => pt.technology == technology);\n      if (projectTechnologyFilterList.length > 0) {\n        projectTechnologies[projectTechnologies.indexOf(projectTechnologyFilterList[0])].usage += 1;\n      } else {\n        projectTechnologies.push({\n          technology,\n          usage: 1\n        });\n      }\n    }));\n    this.analytics.mostUsedTechnologies.data = [...OTHER_TECHNOLOGIES.map(item => {\n      return {\n        technology: item,\n        usage: 0\n      };\n    }), ...this.sortMostUsedProjects(projectTechnologies)];\n    console.log(this.analytics.mostUsedTechnologies.data);\n    Object.keys(this.groupTechnologies).forEach(key => {\n      let technologies = [...this.analytics.mostUsedTechnologies.data].filter(e => e.technology.group == key.toUpperCase());\n      this.groupTechnologies[key] = technologies;\n    });\n    console.log(this.groupTechnologies);\n  }\n  getTechnologyGroupKeys() {\n    return Object.keys(this.groupTechnologies);\n  }\n  sortMostUsedProjects(list) {\n    list.sort((i1, i2) => {\n      if (i1.usage < i2.usage) {\n        return 1;\n      }\n      if (i1.usage > i2.usage) {\n        return -1;\n      }\n      return 0;\n    });\n    return list;\n  }\n  open(url) {\n    url && window.open(url, '_black');\n  }\n  onScroll(event) {}\n  scrollInto(containerName) {\n    let element = document.getElementsByClassName(containerName);\n    element.length > 0 && element[0].scrollIntoView({\n      behavior: 'smooth',\n      block: 'center'\n    });\n  }\n  getTechnologyAvatar(technology) {\n    return technology?.name.split('')[0].toUpperCase();\n  }\n  saveCV() {\n    console.log(experiences, this.analytics);\n    this.isLoading = true;\n    this.pageService.saveCV(user, experiences, this.analytics.mostUsedTechnologies.data.map(e => e.technology), projects, () => {\n      this.isLoading = false;\n    });\n  }\n  viewCV() {\n    // const content = getCVTemplate(user, experiences , this.analytics.mostUsedTechnologies.data.map(e => e.technology),projects);\n    // this.route.navigateByUrl('/pages/cv', { state: {\n    //   content\n    // } })\n    const payload = {\n      user,\n      experiences,\n      technologies: this.analytics.mostUsedTechnologies.data.map(e => e.technology),\n      projects\n    };\n    const url = this.route.serializeUrl(this.route.createUrlTree(['/pages/cv'], {\n      queryParams: {\n        // data: JSON.stringify(payload) // params approach\n      }\n    }));\n    window.open(url, '_blank');\n  }\n};\n__decorate([HostListener('window:scroll', ['$event'])], HomeComponent.prototype, \"onScroll\", null);\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss'],\n  standalone: false\n})], HomeComponent);\nexport { HomeComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}